"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.transformImportEqualsDeclaration = void 0;
const LuauAST_1 = __importDefault(require("../../../LuauAST"));
const assert_1 = require("../../../Shared/util/assert");
const transformVariableStatement_1 = require("./transformVariableStatement");
const createImportExpression_1 = require("../../util/createImportExpression");
const isSymbolOfValue_1 = require("../../util/isSymbolOfValue");
const typescript_1 = __importDefault(require("typescript"));
function transformImportEqualsDeclaration(state, node) {
    if (typescript_1.default.isExternalModuleReference(node.moduleReference)) {
        (0, assert_1.assert)(typescript_1.default.isStringLiteral(node.moduleReference.expression));
        const importExp = (0, createImportExpression_1.createImportExpression)(state, node.getSourceFile(), node.moduleReference.expression);
        const statements = LuauAST_1.default.list.make();
        const aliasSymbol = state.typeChecker.getSymbolAtLocation(node.name);
        (0, assert_1.assert)(aliasSymbol);
        if ((0, isSymbolOfValue_1.isSymbolOfValue)(typescript_1.default.skipAlias(aliasSymbol, state.typeChecker))) {
            LuauAST_1.default.list.pushList(statements, (0, transformVariableStatement_1.transformVariable)(state, node.name, importExp)[1]);
        }
        if (state.compilerOptions.importsNotUsedAsValues === typescript_1.default.ImportsNotUsedAsValues.Preserve &&
            LuauAST_1.default.list.isEmpty(statements) &&
            LuauAST_1.default.isCallExpression(importExp)) {
            LuauAST_1.default.list.push(statements, LuauAST_1.default.create(LuauAST_1.default.SyntaxKind.CallStatement, { expression: importExp }));
        }
        return statements;
    }
    else {
        (0, assert_1.assert)(false, "Identifier and QualifiedName are not implemented for ImportEqualsDeclaration!");
    }
}
exports.transformImportEqualsDeclaration = transformImportEqualsDeclaration;
//# sourceMappingURL=transformImportEqualsDeclaration.js.map